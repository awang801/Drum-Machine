<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Instrument.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Instrument.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @author John McCain &lt;johnm.freestate@gmail.com>
 * @version 1.0
 */

/**
 * Represents an Instrument.
 * @constructor
 * @param {Array} buffers - The possible buffers for this instrument
 * @param {Array} knobs - The knobs that control parameters (aside from volume) for this instrument
 */
function Instrument(buffers, knobs) //has array of knobs, array of buffers, array of sequence, and eventually a gainnode with associated volume knob
{
	//An array of the buffers of this instrument
	this.buffers = buffers;

	//Sequence represents the sequence of beats that this instrument should be played on.  Valid values for each of the 16 beats are 0 (rest), 1 (note), and 2 (emphasised note)
	this.sequence = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];

	//An array of the knobs of this instrument (the first knob should be in the first index)
	this.knobs = knobs;

	//The current buffer
	this.buffer = {};
	this.updateBuffer();
}

Instrument.prototype =
{
	/**
	 * Updates the current buffer based on the current settings of the knobs
	 */
	updateBuffer:function()
	{
		var bufferIndex = getBufferIndex(this.getKnobSettings());
		//console.log('Updating buffer to index ' + bufferIndex);
		this.buffer = this.buffers[bufferIndex];
	},

	/**
	 * Returns an array of the current knob settings
	 * @return arr - An array of the current knob settings.
	 */
	getKnobSettings:function()
	{
		var arr = [];
		//console.log('Getting knob settings for ' + this.knobs.length + ' knobs.');
		for(var i = 0; i &lt; this.knobs.length; i++)
		{
			arr[i] = this.knobs[i].getValue();
		}
		return arr;
	}
}

/**
 * Returns the index for the buffer indicated by the given settings
 * @param {Array} arr - An array of the knob positions (from 0 to 4) with the first knob in the first index and so on
 * @return {number} index - The index of the buffer for the given settings
 */
function getBufferIndex(arr)
{
	var index = 0;
	for(var i = 0; i &lt; arr.length; i++)
	{
		//console.log('buffer index counting: ' + i + '; index is ' + index);
		index += arr[i] * Math.pow(5, arr.length - 1 -i);
	}
	return index;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Instrument.html">Instrument</a></li><li><a href="Knob.html">Knob</a></li><li><a href="MyBufferLoader.html">MyBufferLoader</a></li></ul><h3>Global</h3><ul><li><a href="global.html#audioContext">audioContext</a></li><li><a href="global.html#changeBeat">changeBeat</a></li><li><a href="global.html#getBufferIndex">getBufferIndex</a></li><li><a href="global.html#knobbify">knobbify</a></li><li><a href="global.html#leds">leds</a></li><li><a href="global.html#makeKnob">makeKnob</a></li><li><a href="global.html#onBeat">onBeat</a></li><li><a href="global.html#onBeatClick">onBeatClick</a></li><li><a href="global.html#playSound">playSound</a></li><li><a href="global.html#selectInstrument">selectInstrument</a></li><li><a href="global.html#setup">setup</a></li><li><a href="global.html#start">start</a></li><li><a href="global.html#stop">stop</a></li><li><a href="global.html#updateLeds">updateLeds</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu Apr 07 2016 19:37:13 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
